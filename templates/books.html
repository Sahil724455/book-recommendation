{% extends "base.html" %}
{% block title %}Browse Books{% endblock %}

{% block content %}
<div class="page-header">
    <h1><i class="fas fa-book" style="-webkit-text-fill-color:#818CF8;background:none;"></i> Book Collection</h1>
    <p>Browse all {{ books|length }} books in our dataset</p>
</div>

<!-- Genre Filter -->
<div class="card" style="margin-bottom:2rem; display:flex; align-items:center; gap:1rem; flex-wrap:wrap; padding:1rem 1.5rem;">
    <span style="font-weight:600; font-size:0.9rem;"><i class="fas fa-filter"></i> Filter by Genre:</span>
    <a href="/books?genre=all" class="btn {% if selected_genre == 'all' %}btn-primary{% else %}btn-outline{% endif %}" style="font-size:0.8rem; padding:0.35rem 0.8rem;">
        All
    </a>
    {% for genre in genres %}
    <a href="/books?genre={{ genre }}" class="btn {% if selected_genre == genre %}btn-primary{% else %}btn-outline{% endif %}" style="font-size:0.8rem; padding:0.35rem 0.8rem;">
        {{ genre }}
    </a>
    {% endfor %}
</div>

<!-- Books Grid -->
<div class="grid-3">
    {% for book in books %}
    <div class="card" style="display:flex; flex-direction:column; justify-content:space-between;">
        <div>
            <div style="display:flex; justify-content:space-between; align-items:start; margin-bottom:0.5rem;">
                <span class="badge badge-secondary">{{ book.genre }}</span>
                <span style="color:var(--text-muted); font-size:0.8rem;">{{ book.year }}</span>
            </div>
            <h3 class="card-title" style="font-size:1rem;">
                <a href="/book/{{ book.book_id }}" style="color:var(--text); text-decoration:none;">{{ book.title }}</a>
            </h3>
            <p style="color:var(--primary-light); font-size:0.85rem; margin-bottom:0.5rem;">{{ book.author }}</p>
            <p style="font-size:0.8rem; color:var(--text-muted); line-height:1.5;">
                {{ book.description[:120] }}{% if book.description|length > 120 %}...{% endif %}
            </p>
        </div>
        <div style="margin-top:1rem;">
            <a href="/book/{{ book.book_id }}" class="btn btn-outline" style="font-size:0.8rem; padding:0.4rem 0.8rem; width:100%; justify-content:center;">
                View Details <i class="fas fa-arrow-right"></i>
            </a>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}
